<html>

<head>
    <meta charset="UTF-8"></meta>
    <script type="text/javascript" src="../rb_tree.js"></script>
    <style>
        html,body {
            margin: 0;
            padding: 0;
        }
        canvas{
            height: 100%;
        }
    </style>
</head>

<body>
    <canvas id="canvas" width="1200" height="800"></canvas>
    <script type="text/javascript">
    var tree = new RBTree();
    var size = 10000;
    for (var i = 1; i <= size; i++) {
        tree.insert(i, 'data_' + i);
    }
    //draw tree
    function draw(size) {
        var tree = new RBTree();
        for (var i = 1; i <= size; i++) {
            tree.insert(i, 'data_' + i);
        }
        var ctx = document.querySelector('#canvas').getContext('2d');
        var width = 200;
        var height = tree.root.height + 1;
        ctx.lineWidth = 2;
        ctx.font="12px bold";
        ctx.textAlign = 'center';
        _draw(tree.root);

        function _draw(node) {
            if (!node) {
                return;
            }
            if (!node.pNode) {
                node.x = 400;
                node.y = 40;
            } else if (node.pNode.lChild == node) {
                var w = width * (node.height+1) / height;
                node.x = node.pNode.x - w;
                node.y = node.pNode.y + 100;
            } else {
                var w = width * (node.height+1) / height;
                node.x = node.pNode.x + w;
                node.y = node.pNode.y + 100;
            }
            ctx.beginPath();
            ctx.globalCompositeOperation="source-over";
            ctx.fillStyle = "#fff";
            ctx.arc(node.x, node.y, 12, 0, 2 * Math.PI);
            ctx.fill();
            if(node.color == 1){
                ctx.strokeStyle = "red";
            }else{
                ctx.strokeStyle = "#000";
            }
            ctx.arc(node.x, node.y, 12, 0, 2 * Math.PI);
            ctx.stroke();
            ctx.closePath();

            ctx.fillStyle = "#000";
            ctx.fillText(node.key, node.x, node.y + 4);

            ctx.beginPath();
            ctx.globalCompositeOperation="destination-over";
            ctx.strokeStyle = "#000";
            if (node.pNode) {
                ctx.moveTo(node.x, node.y);
                ctx.lineTo(node.pNode.x, node.pNode.y);
            }
            ctx.stroke();
            ctx.closePath();

            _draw(node.lChild);
            _draw(node.rChild);
        }
    }
    draw(20);
    </script>
</body>

</html>